# Chronic

> A tool to hide `stdout` and `stderr` when a program runs successfully (i.e., returns exit code 0).

## Usage

If you've ever used `cron` to run jobs, you know that it sends an email for any output generated by the command. This is why you see `crontabs` that look like this:

```crontab
MAILTO=admin@example.com
PATH=/usr/bin:/bin
0 4 0 0 0 my-noisy-command -vF >/dev/null 2>&1
```

This is an anti-pattern:

-   If you failed to get the command line correct, then you'll end up getting an email.
-   If anything goes wrong, you've lost the output.
-   If you log to a file, then you have to rotate that log, even if 99% of the contents are useless.

With `chronic` you don't have to worry about that anymore!

```crontab
MAILTO=admin@example.com
PATH=/usr/bin:/bin
0 4 0 0 0 chronic my-noisy-command -vF
```

Now, you'll get no emails unless `my-noisy-command` returns a non-zero exit code. If it does return a non-zero exit code, then you'll get an email that looks like this:

```email
To: admin@example.com
Subject: [CRON] chronic my-noisy-command -vF

**** command ****
[`bash` `-c` `echo "boo"; echo "emergency" 1>&2; exit 10`]

**** stdout ****
stdout: Normal output from the noisy command.
stdout: Starting messages
stdout: Normal stuff

**** stderr ****
stderr: Standard error output from the noisy command.
stderr:
stderr: [FATAL] Something went wrong!

Exited with 10
```

## Installation

```
go build
go install
chmod 755 /root/go/bin/chronic
```
